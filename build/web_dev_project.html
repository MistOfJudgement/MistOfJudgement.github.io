<!DOCTYPE html>
<html lang="en">
	
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Web Dev Project</title>
		<script>
			// Cookie helper functions
			function setCookie(name, value, days = 365) {
			const expires = new Date(Date.now() + days * 864e5).toUTCString();
			document.cookie = name + '=' + encodeURIComponent(value) + '; expires=' + expires + '; path=/';
			}
			
			function getCookie(name) {
			return document.cookie.split('; ').reduce((r, v) => {
			const parts = v.split('=');
			return parts[0] === name ? decodeURIComponent(parts[1]) : r;
			}, '');
			}
			
			// Apply saved theme immediately to prevent flicker
			const savedTheme = getCookie('preferred-theme');
			if (savedTheme) {
			if (savedTheme === 'none') {
			// No CSS - we'll disable it after the link loads
			document.write('<link id="main-stylesheet" rel="stylesheet" href="./static/clean.css" disabled />');
			} else {
			document.write('<link id="main-stylesheet" rel="stylesheet" href="' + savedTheme + '" />');
			}
			} else {
			document.write('<link id="main-stylesheet" rel="stylesheet" href="./static/clean.css" />');
			}
		</script>
	</head>
	
	<body>
		<header>
			<h1>Web Dev Project</h1>
		</header>
		<nav>
			<ul>
				<li><a href="index.html">Home</a></li>
				<li><span>Projects</span>
					<ul>
						<li><a href="website.html">Website</a></li>
						<li><a href="analog_frequency_detector.html">Analog Frequency Detector</a></li>
						<li><a href="bad_apple_celeste.html">Bad Apple Celeste</a></li>
						<li><a href="bad_apple_terminal.html">Bad Apple Terminal</a></li>
						<li><a href="web_dev_project.html">Web Dev Project</a></li>
						<li><a href="dtxdownload.html">DTX Downloader</a></li>
					</ul>
				</li>
				<li><a href="about.html">About</a></li>
				<li><a href="contact.html">Contact</a></li>
			</ul>
			<div class="theme-selector">
				<label for="stylesheet-dropdown">Theme:</label>
				<select id="stylesheet-dropdown" onchange="switchStylesheet()">
					<option value="./static/clean.css">Clean (Original)</option>
					<option value="./static/modern.css">Modern Dark</option>
					<option value="">No CSS</option>
				</select>
			</div>
		</nav>
		<main>
			
			<a href="./bombs.html">Play the Game</a>
			<h2>Problem & Purpose</h2>
			<p>I was already very familiar with web development by the time I took this
				class in my senior year of high school. One of the projects was to use SVG
				graphics in some way, with the example being a map. Around the same time
				I was playing a lot of Keep Talking and Nobody Explodes and ended up trying
				to memorize some of the modules. This project was combination of new features
			to make an interesting game.</p>
			
			<h2>Technical Decisions</h2>
			<p>I needed to use SVG for the project requirement but I also read about
				<a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components">Web Components</a>
				and thought it would be cool to just make custom HTML elements for each module.
			It would be like making my own little framework for constructing the game.</p>
			
			<h3>Web Components</h3>
			<p>Each module is a custom HTML element which can manage its own state and
				layout. The main bomb element manages the timer and strikes, and each module
				is responsible for its own logic. The modules communicate with the bomb by
			dispatching custom events.</p>
			
			<p>Here's a simplified example of the HTML structure showing custom elements:</p>
			
			<pre><code>&lt;ktane-bomb&gt;
  &lt;div class=&quot;module-container&quot;&gt;
    &lt;wires-module class=&quot;module&quot;&gt;
      &lt;!-- SVG paths for wires that can be clicked to cut --&gt;
      &lt;path class=&quot;wire w1&quot; d=&quot;...&quot; style=&quot;stroke: black;&quot;&gt;&lt;/path&gt;
      &lt;path class=&quot;wire w2&quot; d=&quot;...&quot; style=&quot;stroke: blue;&quot;&gt;&lt;/path&gt;
    &lt;/wires-module&gt;
    
    &lt;timer-module&gt;
      &lt;p class=&quot;timer-number&quot;&gt;2:30&lt;/p&gt;
      &lt;p class=&quot;strikes&quot;&gt;&lt;/p&gt;
    &lt;/timer-module&gt;
    
    &lt;keypad-module class=&quot;module&quot;&gt;
      &lt;!-- Grid of clickable symbol buttons --&gt;
      &lt;svg class=&quot;keypad-button smileyface&quot;&gt;...&lt;/svg&gt;
      &lt;svg class=&quot;keypad-button dragon&quot;&gt;...&lt;/svg&gt;
      &lt;svg class=&quot;keypad-button paragraph&quot;&gt;...&lt;/svg&gt;
    &lt;/keypad-module&gt;
  &lt;/div&gt;
			&lt;/ktane-bomb&gt;</code></pre>
			
			<p>Each module is a self-contained web component that manages its own state and communicates with the main bomb through custom events. This makes the code very modular and easy to extend with new module types.</p>
			
		</main>
		
		<footer>
			<p>This website is still in development. Thanks for stopping by!</p>
			<script>
				function updateIframeTheme(selectedTheme) {
				// Update all iframes on the page to match the main page theme
				const iframes = document.querySelectorAll('iframe');
				iframes.forEach(iframe => {
				try {
				// Check if iframe is loaded and accessible (same origin)
				const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
				const iframeStylesheet = iframeDoc.getElementById('main-stylesheet');
				
				if (iframeStylesheet) {
				if (selectedTheme === 'none') {
				// No CSS option - disable stylesheet
				iframeStylesheet.disabled = true;
				} else {
				// Enable stylesheet and set the href
				iframeStylesheet.disabled = false;
				iframeStylesheet.href = selectedTheme;
				}
				}
				} catch (e) {
				// Iframe might not be loaded yet or cross-origin, ignore
				console.log('Could not access iframe stylesheet:', e.message);
				}
				});
				}
				
				function switchStylesheet() {
				const dropdown = document.getElementById('stylesheet-dropdown');
				const stylesheet = document.getElementById('main-stylesheet');
				const selectedTheme = dropdown.value;
				
				if (selectedTheme === 'none') {
				// No CSS option - disable stylesheet
				stylesheet.disabled = true;
				} else {
				// Enable stylesheet and set the href
				stylesheet.disabled = false;
				stylesheet.href = selectedTheme;
				}
				
				// Update iframes to match
				updateIframeTheme(selectedTheme);
				
				// Save user's preference in cookies
				setCookie('preferred-theme', selectedTheme);
				}
				
				// Set initial dropdown value on page load
				document.addEventListener('DOMContentLoaded', function() {
				const dropdown = document.getElementById('stylesheet-dropdown');
				dropdown.addEventListener('change', switchStylesheet);
				
				// Set dropdown to match the already-applied theme
				const savedTheme = getCookie('preferred-theme');
				if (savedTheme) {
				dropdown.value = savedTheme;
				}
				
				// Update iframes after a short delay to ensure they're loaded
				setTimeout(() => {
				if (savedTheme) {
				updateIframeTheme(savedTheme);
				}
				}, 500);
				});
			</script>
		</footer>
		
	</body>
	
</html>